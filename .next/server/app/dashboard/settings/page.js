(()=>{var e={};e.id=631,e.ids=[631],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1569:(e,s,t)=>{Promise.resolve().then(t.bind(t,6027))},2687:()=>{throw Error("Module build failed (from ../../../.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Cannot find module '@tailwindcss/postcss'\nRequire stack:\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/plugins.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/index.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/index.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack-config.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/plugins/next-trace-entrypoints-plugin.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/collect-build-traces.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/index.js\n- /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/cli/next-build.js\n    at Function.<anonymous> (node:internal/modules/cjs/loader:1405:15)\n    at /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/server/require-hook.js:55:36\n    at Function.resolve (node:internal/modules/helpers:145:19)\n    at loadPlugin (/Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/plugins.js:53:32)\n    at /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/plugins.js:185:56\n    at Array.map (<anonymous>)\n    at getPostCssPlugins (/Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/plugins.js:185:47)\n    at async /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/config/blocks/css/index.js:125:36\n    at async /Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js:52:40\n    at async Span.traceAsyncFn (/Users/babsodunewu/.npm/_npx/8b377f6eec906bc4/node_modules/next/dist/trace/trace.js:157:20)")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},6027:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(6752),a=t(9937),n=t(3851),o=t.n(n),d=t(2687),i=t.n(d);function l({show:e,message:s,onClose:t}){return e?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:12,padding:"2rem 3rem",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",textAlign:"center",minWidth:280},children:[(0,r.jsx)("h2",{style:{color:"#2563eb",marginBottom:12},children:"Success!"}),(0,r.jsx)("p",{style:{color:"#374151",marginBottom:20},children:s}),(0,r.jsx)("button",{onClick:t,style:{backgroundColor:"#2563eb",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:500,cursor:"pointer"},children:"Close"})]})}):null}function c(){let[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[m,b]=(0,a.useState)("+234"),[h,x]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[w,j]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[N,k]=(0,a.useState)(!0),[P,_]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!0),[U,I]=(0,a.useState)({type:"",text:""}),[q,F]=(0,a.useState)(!1),[G,D]=(0,a.useState)(!1),E=async s=>{s.preventDefault(),_(!0),I({type:"",text:""});try{let s=localStorage.getItem("token");if(!s)throw Error("You must be logged in to update your profile.");let r=await fetch("https://shopkeeper-v2-5ejc8.ondigitalocean.app/api/v1/auth/update-user",{method:"POST",headers:{"Content-Type":"application/json","D-UUID":"645545453533",Authorization:`Bearer ${s}`},body:JSON.stringify({firstName:e,lastName:t,countryCode:m})}),a=await r.json();if(!r.ok||!a.status)throw Error(a.message||"Failed to update profile.");let n=localStorage.getItem("userData"),o="",d="";if(n)try{let e=JSON.parse(n);o=e.phoneNumber||"",d=e.email||""}catch(e){console.error("Error parsing current user data:",e)}let i={firstName:e,lastName:t,email:d,phoneNumber:o,countryCode:m};localStorage.setItem("userData",JSON.stringify(i)),I({type:"success",text:a.message||"Profile updated successfully!"}),F(!0)}catch(e){I({type:"error",text:e instanceof Error?e.message:"Failed to update profile. Please try again."})}finally{_(!1)}},L=async e=>{if(e.preventDefault(),_(!0),I({type:"",text:""}),g!==w){I({type:"error",text:"New passwords do not match."}),k(!1),_(!1);return}try{let e=localStorage.getItem("token");if(!e)throw Error("You must be logged in to change your password.");let s=await fetch("https://shopkeeper-v2-5ejc8.ondigitalocean.app/api/v1/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json","D-UUID":"645545453533",Authorization:`Bearer ${e}`},body:JSON.stringify({oldPassword:h,newPassword:g,passwordHint:y})}),t=await s.json();if(!s.ok||!t.status)throw Error(t.message||"Failed to update password.");I({type:"success",text:t.message||"Password updated successfully!"}),x(""),f(""),j(""),v(""),D(!0)}catch(e){I({type:"error",text:e instanceof Error?e.message:"Failed to update password. Please try again."})}finally{_(!1)}};return(0,r.jsxs)("div",{className:i().container,children:[(0,r.jsxs)("div",{className:i().header,children:[(0,r.jsx)("h1",{className:i().title,children:"Settings"}),(0,r.jsx)("div",{className:i().buttonGroup,children:(0,r.jsx)(o(),{href:"/dashboard",className:i().backButton,children:"Back to Dashboard"})})]}),U.text&&(0,r.jsx)("div",{className:`p-4 rounded-md ${"success"===U.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:U.text}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:i().settingsCard,children:[(0,r.jsxs)("div",{className:i().settingsHeader,children:[(0,r.jsx)("h2",{className:i().sectionTitle,children:"Profile Settings"}),(0,r.jsx)("p",{className:i().sectionSubtitle,children:"Update your account information"})]}),(0,r.jsx)("div",{className:i().settingsBody,children:S?(0,r.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,r.jsxs)("form",{onSubmit:E,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"firstName",className:i().formLabel,children:"First Name"}),(0,r.jsx)("input",{id:"firstName",type:"text",value:e,onChange:e=>s(e.target.value),className:i().formInput,required:!0})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"lastName",className:i().formLabel,children:"Last Name"}),(0,r.jsx)("input",{id:"lastName",type:"text",value:t,onChange:e=>n(e.target.value),className:i().formInput,required:!0})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsxs)("label",{htmlFor:"email",className:i().formLabel,children:["Email ",(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"(cannot be changed)"})]}),(0,r.jsx)("input",{id:"email",type:"email",value:d,className:`${i().formInput} bg-gray-100`,required:!0,disabled:!0,readOnly:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"countryCode",className:i().formLabel,children:"Code"}),(0,r.jsx)("input",{id:"countryCode",type:"text",value:m,onChange:e=>b(e.target.value),className:i().formInput,placeholder:"+234",maxLength:5,style:{width:"100%"}})]}),(0,r.jsxs)("div",{className:`${i().formGroup} col-span-2`,children:[(0,r.jsxs)("label",{htmlFor:"phoneNumber",className:i().formLabel,children:["Phone Number ",(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"(cannot be changed)"})]}),(0,r.jsx)("input",{id:"phoneNumber",type:"tel",value:u,className:`${i().formInput} bg-gray-100`,placeholder:"8067709887",disabled:!0,readOnly:!0})]})]}),(0,r.jsx)("div",{className:i().buttonContainer,children:(0,r.jsx)("button",{type:"submit",className:i().saveButton,disabled:P,children:P?"Updating...":"Update Profile"})})]})})]}),(0,r.jsxs)("div",{className:i().settingsCard,children:[(0,r.jsxs)("div",{className:i().settingsHeader,children:[(0,r.jsx)("h2",{className:i().sectionTitle,children:"Password Settings"}),(0,r.jsx)("p",{className:i().sectionSubtitle,children:"Update your password"})]}),(0,r.jsx)("div",{className:i().settingsBody,children:(0,r.jsxs)("form",{onSubmit:L,children:[(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"currentPassword",className:i().formLabel,children:"Current Password"}),(0,r.jsx)("input",{id:"currentPassword",type:"password",value:h,onChange:e=>x(e.target.value),className:i().formInput,required:!0})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:i().formLabel,children:"New Password"}),(0,r.jsx)("input",{id:"newPassword",type:"password",value:g,onChange:e=>{let s=e.target.value;f(s),k(""===w||w===s)},className:i().formInput,required:!0})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:i().formLabel,children:"Confirm New Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:w,onChange:e=>{let s=e.target.value;j(s),k(""===s||s===g)},className:`${i().formInput} ${!N?"border-red-500":""}`,required:!0}),!N&&""!==w&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"Passwords do not match"})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"passwordHint",className:i().formLabel,children:"Password Hint (Optional)"}),(0,r.jsx)("input",{id:"passwordHint",type:"text",value:y,onChange:e=>v(e.target.value),className:i().formInput,placeholder:"Something to help you remember your password"})]}),(0,r.jsx)("div",{className:i().buttonContainer,children:(0,r.jsx)("button",{type:"submit",className:i().saveButton,disabled:P,children:P?"Updating...":"Update Password"})})]})})]})]}),(0,r.jsx)(l,{show:q,message:"Profile updated successfully!",onClose:()=>F(!1)}),(0,r.jsx)(l,{show:G,message:"Password updated successfully!",onClose:()=>D(!1)})]})}},6957:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var r=t(6066),a=t(8421),n=t(3917),o=t.n(n),d=t(9826),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(s,i);let l={children:["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9241)),"/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/dashboard/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7834)),"/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9261))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,725)),"/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,6995,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,1102,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,7479,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9261))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/dashboard/settings/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8417:(e,s,t)=>{Promise.resolve().then(t.bind(t,9241))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9241:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(1090).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/dashboard/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/babsodunewu/Desktop/work/shopkeeper-admin/src/app/dashboard/settings/page.tsx","default")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[747,151,811,464,129],()=>t(6957));module.exports=r})();